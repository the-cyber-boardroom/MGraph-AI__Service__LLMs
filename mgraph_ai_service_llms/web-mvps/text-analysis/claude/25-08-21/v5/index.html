<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Analyzer v5 - Cache ID Integration</title>
    <link rel="stylesheet" href="../v1/css/text-analyzer.css">
    <link rel="stylesheet" href="../v1/css/chat-panel.css">
    <link rel="stylesheet" href="../v1/css/analysis-panel.css">
    <link rel="stylesheet" href="../v4/css/styles.css">
    <link rel="stylesheet" href="./css/llm-request-viewer.css">
    <link rel="stylesheet" href="./css/v5-fixes.css">
    <style>
        /* Additional v5 styles for cache integration */
        .view-toggle-container {
            display: flex;
            gap: 0.5rem;
        }

        .view-toggle-btn {
            position: relative;
        }

        .view-toggle-btn[data-view="llm"]::after {
            content: "NEW";
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            font-size: 0.625rem;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: bold;
        }

        /* Cache ID badges in activity log */
        .activity-item.llm {
            border-left-color: #8b5cf6;
            background: #f9f5ff;
        }

        .activity-item.llm .cache-id-badge {
            display: inline-block;
            padding: 0.125rem 0.375rem;
            background: #8b5cf6;
            color: white;
            border-radius: 3px;
            font-size: 0.625rem;
            font-family: 'Courier New', monospace;
            margin-left: 0.25rem;
        }

        /* Analysis panel cache indicators */
        .analysis-cache-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.5rem;
            background: var(--bg-secondary);
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }

        .analysis-cache-indicator.cached {
            background: #dcfce7;
            color: #166534;
        }

        .analysis-cache-indicator.fresh {
            background: #dbeafe;
            color: #1e40af;
        }
    </style>
</head>
<body>
    <text-analyzer></text-analyzer>

    <script type="module">
        import { TextAnalyzer } from './js/components/text-analyzer-v5.js';
        import { ChatPanel } from './js/components/chat-panel-v5.js';
        import { AnalysisPanel } from './js/components/analysis-panel-v5.js';
        import { ActivityLog } from './js/components/activity-log-v5.js';
        import { AnalysisDashboard } from '../v4/js/components/analysis-dashboard.js';
        import { LLMRequestViewer } from './js/components/llm-request-viewer.js';

        // Register custom elements
        customElements.define('text-analyzer', TextAnalyzer);
        customElements.define('chat-panel', ChatPanel);
        customElements.define('analysis-panel', AnalysisPanel);
        customElements.define('activity-log', ActivityLog);
        customElements.define('analysis-dashboard', AnalysisDashboard);
        customElements.define('llm-request-viewer', LLMRequestViewer);

        // Global handler for cache inspection shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl+Shift+C to open LLM Request Viewer
            if (e.ctrlKey && e.shiftKey && e.key === 'C') {
                const analyzer = document.querySelector('text-analyzer');
                if (analyzer) {
                    analyzer.switchView('llm');
                }
            }
        });
    </script>
</body>
</html>